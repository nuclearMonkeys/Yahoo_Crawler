<!-- File derived from Coding Nepal: -->
<!-- https://www.codingnepalweb.com/responsive-accordion-menu-html-css/  -->

<!DOCTYPE html>
<script defer>
// while (doc)
// if (document.readyState === "complete" || document.readyState === "interactive") 
// {
//     setTimeout(fn, 1);
// } else 
// {
//     document.addEventListener("DOMContentLoaded");
// }

var id_list = [1, 2, 3, 4, 51]
var script_obj_list = []
var script_list = []

for (var i = 0; i < id_list.length; i++) 
{
    const script = document.createElement("script");
    script.src = './js_dictionaries/questions/questions_' + Math.floor(id_list[i]/ 50) + '.js'
    script.type = "text/javascript";
    script.defer = true;

    script_list.push(script);

    script_obj_list.push(document.head.appendChild(script));
}
</script>

<html lang='en' dir='ltr'>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Responsive Accordian Menu</title>
        <link rel="stylesheet" href="search_style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
        <!-- <script src="./js_dictionaries/questions/questions_0.js"></script> -->
    </head>

    <span onclick="transitionToPage('https://www.google.com')"> </span>

    <body>
        <div class="wrapper" id="results">
        </div>
    </body>

<script>
buildTable(id_list);

function buildTable(data) 
{
    var results = document.getElementById('results')
    
    // based on the id, % 50 to find the file index
    // var file_index = ; 

    for (var i = 0; i < data.length*3; i += 3) 
    {

        var a = "questions_dict[1]"
        // console.log(questions_dict[1])

        var row =  `<div class="parent-tab tab-${i}}">
        <input type="radio" name="tab" id="tab-${i}">
        <label for="tab-${i}" class="tab-${i}">
            <span id="question-title-${i/3}">${a}</span>
            <div class="icon"><i class="fas fa-plus"></i></div>
        </label>

        <div class="content">
            <div class="child-tab">
                <input type="checkbox" name="sub-tab" id="tab-${i+1}">
                <label for="tab-${i+1}">
                    <span>Sub Heading Something</span>
                    <div class="icon"><i class="fas fa-plus"></i></div>
                </label>

                <div class="sub-content">
                    <p>True to Caesar</p>
                </div>
            </div>

            <div class="child-tab">
                <input type="checkbox" name="sub-tab" id="tab-${i+2}">
                <label for="tab-${i+2}">
                    <span>Sub Heading Something</span>
                    <div class="icon"><i class="fas fa-plus"></i></div>
                </label>

                <div class="sub-content">
                    <p>Patrolling the Mojave makes you wish for a nuclear winter.</p>
                </div>
            </div>
        </div>
        `;


        results.innerHTML += row;

        // var obj = document.head.appendChild(script_list[i/3]);

        // console.log(questions_dict);
        
        document.getElementById("question-title-" + (i/3)).innerText = questions_dict[data[i/3]][0]

        // script_list[i/3].remove(obj)
        script_obj_list.shift().remove(script_list.shift()) // Get the first element of script_obj_list

        console.log(script_obj_list);
    }
}
</script>

</html>