<!-- File derived from Coding Nepal: -->
<!-- https://www.codingnepalweb.com/responsive-accordion-menu-html-css/  -->

<!DOCTYPE html>
<script src="./js_dictionaries/questions/questions.js"></script>
<script src="./js_dictionaries/answers/answers.js"></script>
<script src="./js_dictionaries/questions_to_answers.js"></script>

<html lang='en' dir='ltr'>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Responsive Accordian Menu</title>
        <link rel="stylesheet" href="search_style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
        <!-- <script src="./js_dictionaries/questions/questions_0.js"></script> -->
    </head>

    <span onclick="transitionToPage('https://www.google.com')"> </span>

    <body>
        <div class="wrapper" id="results">
        </div>
    </body>

<script>
var id_list = [1, 2, 3, 4, 100]

buildQuestions(id_list);

function buildQuestions(data) 
{
    // data is the list of q_ids sent from an external JS script
    var results = document.getElementById('results')
    
    // based on the id, % 50 to find the file index
    

    for (var i = 0; i < data.length; i++) 
    {

        var a = "questions_dict[1]"

        let row =  `<div class="parent-tab tab-${i}}">
        <input type="radio" name="tab" id="tab-${i}">
        <label for="tab-${i}" class="tab-${i}">
            <span id="question-title-${i}">${a}</span>
            <div class="icon"><i class="fas fa-plus"></i></div>
        </label>

        <div class="content>"
        `;

        row = [row, '>'].join("")

        if (data[i] in questions_answers_dict) {
            for (var j = 0; j < questions_answers_dict[data[i]].length ; j++) 
            {
                var a_id = questions_answers_dict[data[i]][j]

                // console.log(a_id)

                row = [row, `
                    <div class="child-tab">
                        <input type="checkbox" name="sub-tab" id=answer-${a_id}>
                        <label for="answers-${a_id}">
                            <span>Answer</span>
                            <div class="icon"><i class="fas fa-plus"></i></div>
                        </label>

                        <div class="sub-content">
                            <p>${answers_dict[a_id][0]}</p>
                        </div>
                `].join("")

                // console.log(row);
            }
        }

        row = [row, `\n</div>`].join("");

        console.log(row);

        results.innerHTML += row;

        // var obj = document.head.appendChild(script_list[i/3]);
        
        document.getElementById("question-title-" + (i)).innerText = questions_dict[data[i]][0]
    }
}
</script>

</html>